import{C as W,c as it,a as Nt,R as je,r as l,u as Vt,b as $e,j as e,F as O,d as jt,e as $t,D as qe,s as Wt,f as lt,P as Yt,g as Xt,h as d,Q as Ut,I as Jt,L as ct,E as Kt,i as Zt,O as qt,T as Qt,k as eo,l as We,m as Ye,n as dt,o as to,p as Te,q as Le,S as mt,t as ut,v as ht,w as oo,x as ro,y as ao,z as Ce,A as Z,B as no,G as Oe,U as so,M as io,H as Re,J as lo,K as co,N as mo,V as uo,W as ho,X as po,Y as le,Z as fo,_ as C,$ as yo,a0 as L,a1 as go,a2 as wo,a3 as xo,a4 as bo,a5 as vo,a6 as he,a7 as j,a8 as ke,a9 as Me,aa as m,ab as se,ac as _o,ad as So,ae as ze,af as Ee,ag as ce,ah as Po,ai as xe,aj as Co,ak as pt,al as ko,am as Mo,an as Ao,ao as To,ap as Go,aq as Lo,ar as Ro,as as ft,at as Eo,au as Io,av as Oo,aw as zo,ax as Do,ay as yt,az as Bo,aA as Qe,aB as Ho,aC as Fo,aD as No,aE as gt,aF as wt,aG as Vo,aH as jo,aI as P,aJ as $o,aK as Wo,aL as Yo,aM as Xo,aN as Uo,aO as Jo}from"./.pnpm-dac787a2.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const Pe="TOKEN",Ko="admin",ie={title:"3D数字孪生",logo:"https://p3-passport.byteacctimg.com/img/user-avatar/c2fb4874b00b9202d5d26eb6624101d3~100x100.awebp"},xt=W.enc.Utf8.parse("3333e6e143439161"),bt=W.enc.Utf8.parse("e3bbe7e3ba84431a"),ye={type:"localStorage",prefix:ie.title+"_0.0.1",expire:0,isEncrypt:!0},Zo=(o,t,n=0)=>{if((t===""||t===null||t===void 0)&&(t=null),isNaN(n)||n<0)throw new Error("Expire must be a number");n=(n||ye.expire)*1e3;const a={value:t,time:Date.now(),expire:n},r=Qo(JSON.stringify(a));window[ye.type].setItem(Ue(o),r)},Xe=o=>{let t=null;const n=Ue(o);if(!window[ye.type].getItem(n)||JSON.stringify(window[ye.type].getItem(n))==="null")return null;const a=JSON.parse(er(window[ye.type].getItem(n))),r=Date.now();return a.expire&&a.expire<r-a.time?(vt(o),null):(qo(a.value)?t=JSON.parse(a.value):t=a.value,t)},vt=o=>{window[ye.type].removeItem(Ue(o))},qo=o=>{if(Object.prototype.toString.call(o)==="[object String]")try{const t=JSON.parse(o),n=Object.prototype.toString.call(t);return n==="[object Object]"||n==="[object Array]"}catch{return!1}return!1},Ue=o=>ye.prefix+"_"+o,Qo=o=>{if(typeof o=="object")try{o=JSON.stringify(o)}catch(a){console.log("encrypt error:",a)}const t=W.enc.Utf8.parse(o);return W.AES.encrypt(t,xt,{iv:bt,mode:W.mode.CBC,padding:W.pad.Pkcs7}).ciphertext.toString()},er=o=>{const t=W.enc.Hex.parse(o),n=W.enc.Base64.stringify(t);return W.AES.decrypt(n,xt,{iv:bt,mode:W.mode.CBC,padding:W.pad.Pkcs7}).toString(W.enc.Utf8).toString()},tr=o=>new Promise(t=>{setTimeout(()=>{t()},o)}),or=o=>o.map(t=>({path:t.path,name:t.label,icon:t.icon,routes:"children"in t?t.children.map(({children:n,icon:a,label:r,path:s})=>({path:s,name:r,icon:a,routes:n})):void 0})),rr=()=>{const o=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);if(o.indexOf("win32")>=0||o.indexOf("wow32")>=0||o.indexOf("win64")>=0||o.indexOf("wow64")>=0)return"win32";if(t)return"mac"},ar=()=>({token:{colorPrimary:"#00d1d1"},components:{Modal:{headerBg:"#ffffff00",contentBg:"#ffffff1f"}}});const nr={data:[]},sr=it({name:"common",initialState:nr,reducers:{setData:(o,t)=>{o.data=t.payload}}}),ir=sr.reducer,lr={role:[],token:Xe(Pe)??"",menu:[]},_t=it({name:"user",initialState:lr,reducers:{setUserToken:(o,t)=>{o.token=t.payload},setMenu:(o,t)=>{o.menu=t.payload}}}),{setUserToken:St,setMenu:et}=_t.actions,cr=_t.reducer,dr=Nt({reducer:{user:cr,common:ir},middleware:o=>o({serializableCheck:{ignoredActions:["user/setMenu","socket/setSendMessage"],ignoredPaths:["user","socket"]}})}),Pt=async(o,t)=>{await tr(1e3),Zo(Pe,t,1e3*60*24),o(St(Xe(Pe)))},Ct=o=>new Promise(t=>{try{vt(Pe),o(St(""))}finally{t("")}}),Je=je.createContext({signIn:Pt,signOut:Ct}),mr=o=>{const t=Vt(),{include:n,keys:a}=o,{pathname:r}=$e(),s=l.useRef(new Map),i=l.useReducer(c=>!c)[1],h=l.useMemo(()=>r+"__"+a[r],[r,a]),p=l.useRef("");return l.useEffect(()=>{s.current.forEach(function(c,g){const f=g.split("__")[0];(!n.includes(f)||f===r)&&this.delete(g)},s.current),p.current=h,s.current.has(p.current)||s.current.set(p.current,t),i()},[h,n]),e(O,{children:Array.from(s.current).map(([c,g])=>e(je.Fragment,{children:c===p.current?e(je.Fragment,{children:g}):e("div",{style:{display:"none"},children:g})},c))})},ur=l.memo(mr),kt=o=>{const t=$e();l.useEffect(()=>{o(t)},[t])},Ke=jt,Mt=$t,tt={user:[{label:"User",key:"user",path:"/user",icon:e(qe,{}),filepath:"pages/user/index.tsx"}],admin:[{label:"告警监控",key:"alarm",path:"alarm",icon:e(qe,{}),filepath:"pages/alarm/index.tsx"}]},hr="/degital-twin-3d/png/logo-2bf4e179.png",pr={fixSiderbar:!0,layout:"mix",splitMenus:!0,navTheme:"realDark",colorPrimary:"#00d1d1",footerRender:!1,siderMenuType:"sub",fixedHeader:!0,token:{dialog:{}}},fr=[{label:"Dashboard",key:"dashboard",path:"dashboard",icon:e(Zt,{}),filepath:"pages/dashboard/index.tsx"}],yr=()=>{var p;const o=Mt(c=>c.user,Wt),t=lt(),n=$e(),[a,r]=l.useState(n.pathname);Ke(),l.useContext(Je);const[s,i]=l.useState(rr()==="mac"&&window.matchMedia("(prefers-color-scheme: dark)").matches);kt(c=>{r(c.pathname)});const h={title:ie.title.slice(0,11),...pr};return l.useEffect(()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",c=>{c.matches?i(!0):i(!1)})},[]),e(Yt,{dark:s,children:e("div",{id:"admin-pro-layout",style:{height:"100vh"},children:e(Xt,{siderWidth:245,logo:e("img",{src:hr,alt:"logo",style:{width:"60px",height:"20px"}}),style:{height:"100vh"},ErrorBoundary:!1,route:{path:"/",routes:or([...fr,...o.menu])},...h,location:{pathname:a},waterMarkProps:{content:ie.title},appList:[{icon:ie.logo,title:"WMS",desc:"WMS系统"}],avatarProps:{src:ie.logo,size:"small",title:e("div",{children:(p=o.token)==null?void 0:p.username})},menuFooterRender:c=>{if(!(c!=null&&c.collapsed||c!=null&&c.isMobile))return d("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e(Ut,{},"QuestionCircleFilled"),e(Jt,{},"InfoCircleFilled")]})},menuItemRender:(c,g)=>e(ct,{to:(c==null?void 0:c.path)||"/",onClick:()=>{r(c.path||"/")},children:g}),onMenuHeaderClick:()=>t("/"),children:e(Kt,{children:e(ur,{include:[],keys:[]})})})})})};function gr(){return e(qt,{})}const wr=({children:o,...t})=>e(Qt.Text,{...t,children:o}),ja=l.memo(wr),xr="//at.alicdn.com/t/c/font_4038927_bjmr1hka5o.js";eo({scriptUrl:xr});const br="_panel_3hwud_1",vr="_card_3hwud_1",_r="_title_3hwud_30",Sr="_borderColor1_3hwud_1",Pr="_borderColor_3hwud_1",At={panel:br,card:vr,title:_r,borderColor1:Sr,"animate-border-glow":"_animate-border-glow_3hwud_49",borderColor:Pr},Cr="_panel_3iytv_1",kr="_card_3iytv_1",Mr="_title_3iytv_30",Ar="_borderColor1_3iytv_1",De={panel:Cr,card:kr,title:Mr,borderColor1:Ar};function be(o={panelConfig:{},title:"",children:{},scale:50}){const t=l.useRef(null),n={mass:1,tension:170,friction:26,clamp:!1,precision:.01,velocity:0,...o.panelConfig},a=(c,g,f)=>[-(g-f.top-f.height/2)/(o.scale||50),(c-f.left-f.width/2)/(o.scale||50),1.01],r=(c,g,f)=>`perspective(600px) rotateX(${c}deg) rotateY(${g}deg) scale(${f})`,[{xys:s},i]=We(()=>({xys:[0,0,1],config:n}),[n]),h=()=>i.start({xys:[0,0,1]}),p=c=>{const g=t.current.getBoundingClientRect();i.start({xys:a(c.clientX,c.clientY,g)})};return e("div",{className:"w-full mt-2",ref:t,children:e("div",{children:d(Ye.div,{className:`border  border-solid ${De["animate-border-glow"]} ${De.card} `,style:{transform:s.to(r)},onMouseLeave:h,onMouseMove:p,children:[o.title&&d("p",{className:`${De.title} text-sm  flex justify-between border-solid`,children:[o.title," ",o.right]}),o.children]})})})}const Tr={},$a=o=>dt.get("/api/Area/GetAreaLocationWeekSummary",o),Gr=o=>dt.get("/api/Summary/GetCurrentLocationSummary",o),Tt=()=>{const{data:o}=to(()=>Gr({}),{...Tr});o!=null&&o.resultData;var t=3;const n=["A12","A2","A3","A4","A5","A7","B1","B3","Y2","Y1","C1","C2","C4","A1","B4","C6"],a=[75,62,57,42,35,32,29,27,75,62,57,42,35,32,29,27],r=[];for(var s=Math.max.apply(null,a),i=0;i<a.length;i++)r.push(s);const h={title:{show:!1},tooltip:{trigger:"item"},grid:{borderWidth:0,top:"10",left:"10",right:"30",bottom:"3%"},yAxis:[{inverse:!0,type:"category",axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,inside:!1},data:n}],xAxis:{type:"value",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},dataZoom:[{type:"slider",show:!0,yAxisIndex:[0],right:0,width:8,height:"84%",top:"7%",start:0,end:50,zoomLock:!0,showDetail:!1,showDataShadow:!1,brushSelect:!1,fillerColor:"rgba(200,200,200,.3)",backgroundColor:"rgba(200,200,200,.05)",borderColor:"transparent",handleSize:"0%"}],series:[{name:"",type:"bar",zlevel:2,barWidth:t,itemStyle:{normal:{barBorderRadius:2,color:new Te(1,0,0,0,[{offset:0,color:"#248ff7"},{offset:1,color:"#6851f1"}])},emphasis:{color:new Te(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:1,color:"#83bff6"}])}},data:a,animationDuration:1500,label:{normal:{color:"#555",show:!0,position:[0,"-16px"],textStyle:{fontSize:12,color:"#fff"},formatter:function(p,c){return p.name}}}},{type:"pictorialBar",animationDuration:0,symbolRepeat:"fixed",symbolMargin:"20%",symbol:"roundRect",symbolSize:[t*1.2,t],itemStyle:{normal:{color:"rgba(200,200,200,.06)"}},label:{normal:{color:"#fff",show:!0,position:"right",textStyle:{fontSize:12,color:"#fff"},formatter:function(p){return console.log(p),a[p.dataIndex]}}},data:r,z:0,animationEasing:"elasticOut"}],animationEasing:"cubicOut"};return e(O,{children:e("div",{children:e(Le,{style:{height:"240px"},option:h})})})},Lr=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"})),Gt=()=>{const o=[{name:"HG",value:20},{name:"RG",value:10},{name:"MG",value:20},{name:"FM",value:10},{name:"PG",value:30}],t=[],n=["#00ffff","#00cfff","#006ced","#ffe000","#ffa800","#ff5b00"];for(let s=0;s<o.length;s++)t.push({value:o[s].value,name:o[s].name,itemStyle:{normal:{borderWidth:5,shadowBlur:20,borderColor:n[s],shadowColor:n[s]}}},{value:2,name:"",itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0, 0, 0, 0)",borderColor:"rgba(0, 0, 0, 0)",borderWidth:0}}});return e(O,{children:e("div",{children:e(Le,{style:{height:"200px"},option:{color:n,title:{text:"",top:"48%",textAlign:"center",left:"49%",textStyle:{color:"#fff",fontSize:18,fontWeight:"400"}},tooltip:{show:!0},legend:{icon:"circle",itemWidth:8,orient:"horizontal",data:["HG","RG","MG","FM","PG"],left:10,bottom:20,align:"left",textStyle:{color:"#fff"},itemGap:10},toolbox:{show:!1},grid:{},series:[{name:"",type:"pie",clockWise:!1,radius:[35,39],center:["50%","35%"],hoverAnimation:!1,itemStyle:{normal:{label:{show:!0,position:"outside",color:"#ddd",formatter:function(s){let i=0,h=0;for(let p=0;p<o.length;p++)h+=o[p].value;return i=(s.value/h*100).toFixed(0),s.name!==""?""+s.name+`

`+i+"%":""}},labelLine:{length:10,length2:20,show:!0,color:"#00ffff"}}},data:t}]}})})})},Rr=Object.freeze(Object.defineProperty({__proto__:null,default:Gt},Symbol.toStringTag,{value:"Module"})),Lt=()=>e(mt,{config:{header:["编号","电量","位置","速度"],data:[["AGV1","100%","A1","1m/s"],["AGV2","100%","A2","1m/s"],["AGV3","100%","A3","1m/s"],["AGV4","100%","A4","1m/s"],["AGV5","100%","A5","1m/s"],["AGV6","100%","A6","1m/s"],["AGV7","100%","A7","1m/s"],["AGV8","100%","A8","1m/s"],["AGV9","100%","A9","1m/s"],["AGV10","100%","A10","1m/s"],["AGV11","100%","A11","1m/s"]],headerBGC:"#00fff138",oddRowBGC:"#00000017",evenRowBGC:"#ededed13",headerHeight:28,rowNum:8,columnWidth:[80,70,60,100]},style:{width:"100%",height:"220px",fontSize:"12px",marginBottom:"8px"}}),Er=Object.freeze(Object.defineProperty({__proto__:null,default:Lt},Symbol.toStringTag,{value:"Module"})),Rt=()=>{const[o,t]=l.useState(!0),n=We({transform:o?"translate(0%)":"translateX(-100%)",config:{precision:.01}}),a=()=>{t(!o)};return d(Ye.div,{style:{...n},className:`absolute top-2 left-2 bottom-2 w-[280px] ${At.panel}`,children:[d("div",{className:"h-full overflow-auto",children:[e(be,{title:"库房情况",children:e(Tt,{})}),e(be,{title:"库存类型",children:e(Gt,{})}),e(be,{title:"AGV信息",children:e(Lt,{})})]}),e("div",{className:"absolute text-white top-1/2 -translate-y-1/2 right-[-21px] bg-black bg-opacity-20 text-xl font-bold bg",children:o?e(ut,{className:"hover:scale-110 transition-transform duration-300 ",onClick:a}):e(ht,{className:"hover:scale-110 transition-transform duration-300",onClick:a})})]})},Ir=Object.freeze(Object.defineProperty({__proto__:null,default:Rt},Symbol.toStringTag,{value:"Module"})),Et=()=>e(mt,{config:{header:["编号","时间","类型","区域","单号"],data:[["1","2023-06-01 12:00:00","入库","A1","b12c3"],["2","2023-06-01 12:00:00","出库","A2","b12c3"],["3","2023-06-01 12:00:00","入库","A3","b12c3"],["4","2023-06-01 12:00:00","出库","A4","b12c3"],["5","2023-06-01 12:00:00","入库","A5","b12c3"],["6","2023-06-01 12:00:00","出库","A6","b12c3"],["7","2023-06-01 12:00:00","入库","A7","b12c3"],["8","2023-06-01 12:00:00","出库","A8","b12c3"]],headerBGC:"#00fff138",oddRowBGC:"#00000017",evenRowBGC:"#ededed13",headerHeight:28,rowNum:8,columnWidth:[80,70,60,100]},style:{width:"100%",height:"220px",fontSize:"12px",marginBottom:"8px"}}),Or=Object.freeze(Object.defineProperty({__proto__:null,default:Et},Symbol.toStringTag,{value:"Module"})),It=()=>{let o={xdata:["01/01","01/02","01/03","01/04","01/05"],currentYearList:[10,20,30,40,50],lastYearList:[20,10,30,40,20],rateDataOne:[10,40,20,30,50]},t=!1,n=100;o.xdata.length>6&&(t=!0,n=60);let a={grid:{top:"10%",left:"3%",right:"10%",bottom:"13%"},barWidth:6,tooltip:{show:!0,trigger:"axis",formatter:r=>r[0].name+"<br/>"+r[0].seriesName+":"+r[0].value+"<br/>"+r[1].seriesName+":"+r[1].value+"<br/>"+r[2].seriesName+":"+r[2].value+"%"},dataZoom:[{show:t,realtime:!0,height:8,start:0,textStyle:{show:!1},end:n,borderColor:"rgba(255,255,255,0.20)",backgroundColor:"rgba(255,255,255,0.10)",bottom:"1%"},{type:"inside",realtime:!0,start:0,end:100}],xAxis:[{type:"category",data:o.xdata,splitLine:{lineStyle:{color:"rgba(255,255,255,0.2)"}},axisTick:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.2)",type:"solid"}},axisLabel:{show:!0,textStyle:{color:"rgba(250,250,250,1)",fontSize:12}}}],yAxis:[{name:"",nameTextStyle:{color:"rgb(250,250,250,.7)",fontSize:12,padding:[0,25,0,0]},type:"value",splitLine:{show:!0,lineStyle:{color:"rgba(255,255,255,0.1)",type:"dotted"}},axisTick:{show:!1},axisLine:{show:!1,lineStyle:{color:"rgba(255,255,255,0.2)",type:"solid"}},axisLabel:{textStyle:{color:"rgba(250,250,250,0.6)",fontSize:12}}},{name:"",nameTextStyle:{color:"rgb(250,250,250,.7)",fontSize:12,padding:[0,0,0,40]},show:!0,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{textStyle:{fontSize:12,color:"rgba(255,255,255, .7)"}}}],series:[{type:"bar",barMinHeight:0,name:"今年",itemStyle:{normal:{color:new Te(0,0,0,1,[{offset:0,color:"#1AA0FF"},{offset:1,color:"rgba(3,14,55,0.6)"}]),borderWidth:2}},data:o.currentYearList},{type:"bar",barMinHeight:0,name:"去年",itemStyle:{normal:{color:new Te(0,0,0,1,[{offset:0,color:"#FFBD46"},{offset:1,color:"rgba(3,14,55,0.6)"}]),borderWidth:2}},data:o.lastYearList,barCategoryGap:"40%"},{z:9,yAxisIndex:1,name:"增幅",type:"line",showAllSymbol:!0,symbol:"rect",symbolSize:5,itemStyle:{color:"#fff",width:1,shadowColor:"#fff",borderColor:"#44E5BE",shadowBlur:2},lineStyle:{width:1,color:"#44E5BE"},data:o.rateDataOne}]};return e(O,{children:e("div",{children:e(Le,{style:{height:"200px"},option:a})})})},zr=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"})),Ot=()=>{const o=["#EAEA26","#906BF9","#FE5656","#01E17E","#3DD1F9","#FFAD05"],t={orient:"horizontal",icon:"circle",padding:0,top:15,right:10,itemWidth:6,itemHeight:6,itemGap:6,textStyle:{fontSize:12,color:"#ffffff"}},n={show:!0,trigger:"axis",axisPointer:{type:"shadow"}};let a=[{name:"A1",data:[120,132,101,134,90,230,210]},{name:"C3",data:[220,182,191,234,290,330,310]},{name:"Y2",data:[150,232,201,154,190,330,410]},{name:"A3",data:[320,332,301,334,390,330,320]}];const r=i=>({type:"line",smooth:!0,symbol:"emptyCircle",symbolSize:6,itemStyle:{},label:{show:!1},lineStyle:{width:1},areaStyle:{opacity:.4,color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:o[i]},{offset:1,color:"transparent"}],global:!1}}});return a=a.map((i,h)=>({...i,...r(h)})),e("div",{children:e(Le,{style:{height:"250px"},option:{color:o,tooltip:n,legend:t,grid:{top:"15%",left:"3%",right:"4%",bottom:"5%",containLabel:!0},xAxis:{show:!0,type:"category",boundaryGap:!1,axisLine:{show:!0,lineStyle:{color:"rgba(255,255,255,.4)"}},axisTick:{show:!1},axisLabel:{color:"#ffffff"},splitLine:{show:!1},data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value",axisLabel:{color:"#ffffff"},axisLine:{show:!0,lineStyle:{color:"rgba(255,255,255,.4)"}},splitLine:{show:!1}},series:a}})})},Dr=Object.freeze(Object.defineProperty({__proto__:null,default:Ot},Symbol.toStringTag,{value:"Module"})),Br={visible:!1,cameraStatus:!1,cameraCtrls:{choiceCtrls:"1",autoCruise:!1}},Hr=()=>{const o=oo(()=>({...Br,setVisible(t){o.visible=t},setCameraStatus(t){o.cameraStatus=t},setCameraCtrls(t){o.cameraCtrls=t}}));return o},Ie=l.createContext(null),Fr=o=>{const t=Hr();return e(Ie.Provider,{value:{threeStore:t},children:o.children})};function Nr({children:o}){return e(Fr,{children:o})}const Vr={visible:!1,cameraStatus:!1,cameraCtrls:{choiceCtrls:"1",autoCruise:!1}};ro({...Vr,setVisible:ao(function(o){this.visible=o})});const jr=()=>{const o=l.useContext(Ie),[t,n]=l.useState("inline");return e(O,{children:d(Z,{layout:"inline",className:"absolute bottom-0 left-0 translate-x-[-100%] flex-nowrap w-max",initialValues:{layout:t},onValuesChange:r=>{o.threeStore.setCameraCtrls({...o.threeStore.cameraCtrls,...r})},children:[e(Z.Item,{label:"自动巡航",name:"autoCruise",children:e(no,{})}),e(Z.Item,{label:"控制器切换",name:"choiceCtrls",children:d(Oe.Group,{children:[e(Oe,{value:"0",children:"按键控制"}),e(Oe,{value:"1",children:"自由控制"})]})})]})})},zt=Ce(jr),$r=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),Dt=()=>{const[o,t]=l.useState(!0),[n,a]=l.useState(!1),r=We({transform:o?"translate(0%)":"translateX(100%)",config:{precision:.01}}),s=()=>{t(!o)};return d("div",{children:[d(Ye.div,{style:{...r},className:`absolute top-2 w-[280px] right-2 bottom-2 ${At.panel}`,children:[d("div",{className:"overflow-auto h-full",children:[e(be,{title:"出入库信息",children:e(Et,{})}),e(be,{title:"出入库统计",children:e(It,{})}),e(be,{title:"任务分布",right:e("span",{className:"hover:scale-120 transition-transform duration-300 ",children:e(so,{onClick:()=>{a(!0)}})}),children:e(Ot,{})})]}),e("div",{className:"absolute text-white top-1/2 -translate-y-1/2 left-[-21px] bg-black bg-opacity-20 text-xl font-bold bg",children:o?e(ht,{className:"hover:scale-110 transition-transform duration-300",onClick:s}):e(ut,{className:"hover:scale-110 transition-transform duration-300 ",onClick:s})}),e(zt,{})]}),d(io,{title:"任务列表",centered:!0,open:n,onOk:()=>a(!1),onCancel:()=>a(!1),children:[e("p",{children:"some contents..."}),e("p",{children:"some contents..."}),e("p",{children:"some contents..."})]})]})},Wr=Object.freeze(Object.defineProperty({__proto__:null,default:Dt},Symbol.toStringTag,{value:"Module"})),Yr=o=>{Re().camera;const n=l.useContext(Ie),a=()=>d("group",{children:[e(co,{far:1e5,movementSpeed:100,activeLook:!1,lookVertical:!0}),e(mo,{zoomSpeed:.1})]}),r=()=>e("group",{children:e(uo,{})});return d(O,{children:[n.threeStore.cameraCtrls.choiceCtrls==="1"?r():a(),e(lo,{makeDefault:!0,position:[-100,200,1e3],fov:48,near:1,far:1e5,maxDistance:10,...o})]})},Xr=Ce(Yr);function Ur(o){const t=l.useRef();return e(ho,{ref:t,castShadow:!0,penumbra:2,distance:6e3,angle:Math.PI*.6,attenuation:5,anglePower:Math.PI/2,intensity:6,"shadow-mapSize":[1024,1024],"shadow-camera-near":200,"shadow-camera-far":2e3,...o})}const Jr=()=>d(O,{children:[e("ambientLight",{intensity:.5}),e("directionalLight",{color:16777215,intensity:3,position:[10,10,0]}),e(Ur,{color:"#fff",position:[3,2e3,2]})]}),Kr=o=>e(po,{distance:45e4,sunPosition:[0,1,0],inclination:0,azimuth:.25,...o}),Zr=({position:o,scale:t})=>{const n=l.useRef(null),a=le(fo,"/static/models/tree/scene.gltf"),r=s=>{s.children&&s.children.forEach(i=>{i.castShadow=!0,i.receiveShadow=!0,r(i)})};return a.scene&&(console.log(o),r(a.scene),n.current=a.scene.clone()),e(O,{children:e("primitive",{position:o,object:n.current,castShadow:!0,scale:t})})},qr=[{position:new C(1600,0,0),scale:new C(.06,.06,.06)},{position:new C(0,0,1500),scale:new C(.1,.1,.1)},{position:new C(100,0,1500),scale:new C(.1,.1,.1)},{position:new C(310,0,1500),scale:new C(.13,.13,.13)}];function Qr(){return e("group",{children:qr.map((o,t)=>e(Zr,{position:o.position,scale:o.scale},t))})}const ea=()=>{const{scene:o}=Re(),t=new yo,n=new L(10,10,10),a=new go({color:15658734,flatShading:!0});for(let r=0;r<300;r++){const s=new wo(n,a),i=Math.random()<.5?-1:1,h=Math.random()<.5?-1:1;s.receiveShadow=!0,s.position.x=Math.random()*8e3*h+h*2e3,s.position.y=0,s.position.z=Math.random()*8e3*i+i*2e3,s.scale.x=10,s.scale.y=Math.random()*80+10,s.scale.z=10,s.updateMatrix(),s.matrixAutoUpdate=!1,t.add(s)}return o.add(t),o.fog=new xo(0,85e-6),e("group",{})},ta=()=>(l.useContext(Ie),d("group",{children:[e(Jr,{}),e(Xr,{}),e(Kr,{}),e(ea,{}),e(Qr,{})]})),oa=Ce(ta);bo({TextGeometry:vo});const ra=o=>{const{wallThickness:t=2,width:n=1400,length:a=1200,height:r=400,aside_width:s=130,aside_length:i=130,position:h=new C(200,0,0),space_width:p=1e4,space_length:c=12e3,road_width:g=600,grass_width:f=400,cross_width:b=100}=o,_=(k,A)=>{const $=new _o,U={};return A==null||A.forEach(H=>{U[H.i]=H.setShape}),k.forEach((H,ee)=>{const{x:ne,y:G}=H;ee||$.moveTo(ne,G),U[ee]?U[ee]($,H):$.lineTo(ne,G)}),$},M=new he().load("/static/wall_pic5.jpg");M.wrapS=j,M.repeat.set(.02,.02);const S=new he().load("/static/wall_pic7.png");S.wrapS=j,S.wrapT=j,S.rotation=Math.PI/2,S.repeat.set(.005,.005);const V=new he().load("/static/floor_02.png");V.wrapS=j,V.wrapT=j,V.repeat.set(.01,.01);const R=new he().load("/static/road2.jpg");R.wrapS=j,R.wrapT=j,R.repeat.set(5,1);const E=new he().load("/static/grass.jpg");E.wrapS=j,E.wrapT=j,E.repeat.set(20,1);const Y=new he().load("/static/surface.jpg");Y.wrapS=j,Y.wrapT=j,Y.repeat.set(.01,.01);const J=new he().load("/static/cross.png");J.wrapS=j,J.wrapT=j,J.repeat.set(70,1);const K=()=>{const k=_([new m(-a,-r),new m(-a,r),new m(a,r),new m(a,-r)]),A=new So;return A.moveTo(-n/30,-r),A.lineTo(-n/30,-2*r/5),A.lineTo(n/30,-2*r/5),A.lineTo(n/30,-r),A.moveTo(-n/30,-r),k.holes.push(A),k},de=()=>_([new m(-a,-r/2),new m(-a,-(r/2-5)),new m(-a/2,r/4),new m(0,-(r/2-5)),new m(a/2,r/4),new m(a,-(r/2-5)),new m(a,-r/2),new m(-a,-r/2)]),x=()=>_([new m(-a,-(r/2-5)),new m(-a,-(r/2+5)),new m(-a-t-5,-(r/2+5)),new m(-a-t-5,-(r/2-5)+2*t),new m(-a,-(r/2-5)+2*t),new m(-a,-(r/2-5)+t),new m(-a/2,r/4+t),new m(0,-(r/2-5)+t),new m(a/2,r/4+t),new m(a,-(r/2-5)+t),new m(a,-(r/2-5)+2*t),new m(a+5,-(r/2-5)+2*t),new m(a+5,-(r/2-5)+2*t-15),new m(a,-(r/2-5)+2*t-15),new m(a,-(r/2-5)),new m(a/2,r/4),new m(0,-(r/2-5)),new m(-a/2,r/4),new m(-a,-(r/2-5))],[{i:3,setShape:(A,$)=>{const{x:U,y:H}=$;A.bezierCurveTo(-a-t-5-2.5,-(r/2+5-3.5),-a-t-5-2.5,-(r/2+5-10.5),U,H)}},{i:12,setShape:(A,$)=>{const{x:U,y:H}=$;A.bezierCurveTo(a+5+2.5,-(r/2-5)+2*t-3.5,a+5+2.5,-(r/2-5)+2*t-10.5,U,H)}}]),w=()=>_([new m(-a,-(r/2-5)+t),new m(-a,-(r/2-5)+2*t),new m(-a/2,r/4+2*t),new m(0,-(r/2-5)+2*t),new m(a/2,r/4+2*t),new m(a,-(r/2-5)+2*t),new m(a,-(r/2-5)+t),new m(a/2,r/4+t),new m(0,-(r/2-5)+t),new m(-a/2,r/4+t)]),z=()=>e("extrudeGeometry",{args:[_([new m(-n-s,-a-i),new m(n+s,-a-i),new m(n+s,a+i),new m(-n-s,a+i)]),{depth:t}]}),D=()=>e("extrudeGeometry",{args:[_([new m(n+s,-a-i),new m(n+s,-c),new m(-n-s,-c),new m(-n-s,-a-i)]),{depth:t}]}),B=()=>e("extrudeGeometry",{args:[_([new m(-n-s,a+i),new m(-n-s,c),new m(n+s,c),new m(n+s,a+i)]),{depth:t}]}),F=()=>e("extrudeGeometry",{args:[_([new m(-n-s,-a-i),new m(-p,-a-i),new m(-p,a+i),new m(-n-s,a+i)]),{depth:t}]}),N=()=>e("extrudeGeometry",{args:[_([new m(n+s,a+i),new m(p,a+i),new m(p,-a-i),new m(n+s,-a-i)]),{depth:t}]}),Q=()=>e("meshBasicMaterial",{map:R}),me=()=>e("meshBasicMaterial",{map:E}),X=()=>e("meshBasicMaterial",{map:Y}),ge=()=>e("meshBasicMaterial",{map:J}),ue=k=>d("group",{rotation:[0,k.rotation,0],children:[d("mesh",{rotation:[Math.PI/2,0,0],children:[d(ke,{children:[e(Me,{position:[0,g/2,0],children:e("boxGeometry",{args:[k.length*2,g,10]})}),e(ze,{position:[0,-g/2,0],children:e("boxGeometry",{args:[k.length*2,g,10]})}),e(se,{position:[0,0,0],children:e("boxGeometry",{args:k.subArgs})})]}),e(Q,{})]}),d("mesh",{rotation:[Math.PI/2,0,0],children:[d(ke,{children:[e(Me,{position:[0,g+f/2,0],children:e("boxGeometry",{args:[k.length*2,f,10]})}),e(ze,{position:[0,-(g+f/2),0],children:e("boxGeometry",{args:[k.length*2,f,10]})}),e(se,{position:[0,0,0],children:e("boxGeometry",{args:k.subArgs})})]}),e(me,{})]}),d("mesh",{rotation:[Math.PI/2,0,0],children:[d(ke,{children:[e(Me,{position:[0,g+f+b/2,0],children:e("boxGeometry",{args:[k.length*2,b,10]})}),e(ze,{position:[0,-(g+f+b/2),0],children:e("boxGeometry",{args:[k.length*2,b,10]})}),e(se,{position:[0,0,0],children:e("boxGeometry",{args:k.subArgs})})]}),e(ge,{})]})]});return d("group",{position:h,receiveShadow:!0,children:[d("mesh",{rotation:[Math.PI/2,0,0],children:[d(ke,{children:[e(Me,{children:e("extrudeGeometry",{args:[_([new m(-p,-c),new m(p,-c),new m(p,c),new m(-p,c),new m(-p,-c)]),{depth:t}]})}),e(se,{children:e(z,{})}),e(se,{children:e(D,{})}),e(se,{children:e(B,{})}),e(se,{children:e(F,{})}),e(se,{children:e(N,{})})]}),e("meshStandardMaterial",{color:"white"})]}),d("mesh",{rotation:[Math.PI/2,0,0],receiveShadow:!0,children:[e(z,{}),e("meshPhongMaterial",{map:V,reflectivity:1.5})]}),d("mesh",{position:new C(0,r,a-t),receiveShadow:!0,children:[e("extrudeGeometry",{args:[_([new m(-n,-r),new m(-n,r),new m(n,r),new m(n,-r)]),{depth:t}]}),e("meshPhongMaterial",{map:M,metalness:1,reflectivity:1.5})]}),d("mesh",{rotation:[Math.PI/2,0,0],children:[e(B,{}),e(X,{})]}),d("mesh",{position:new C(0,r,-a),receiveShadow:!0,children:[e("extrudeGeometry",{args:[_([new m(-n,-r),new m(-n,r),new m(n,r),new m(n,-r)]),{depth:t}]}),e("meshPhongMaterial",{map:M,metalness:1,reflectivity:1.5})]}),d("mesh",{rotation:[Math.PI/2,0,0],children:[e(D,{}),e(X,{})]}),d("mesh",{rotation:[Math.PI/2,0,0],children:[e(F,{}),e(X,{})]}),d("mesh",{position:new C(n,r,0),rotation:[0,Math.PI/2,0],receiveShadow:!0,children:[e("extrudeGeometry",{args:[K(),{depth:t}]}),e("meshPhysicalMaterial",{map:M,metalness:1,roughness:.8})]}),d("mesh",{rotation:[Math.PI/2,0,0],children:[e(N,{}),e(X,{})]}),e(ue,{rotation:0,length:p,subArgs:[n*2+s*2,a*2+i*2,10]}),e(ue,{rotation:Math.PI/2,length:c,subArgs:[a*2+i*2,n*2+s*2,10]}),d("mesh",{position:new C(n,5/2*r,0),rotation:[0,Math.PI/2,0],receiveShadow:!0,children:[e("extrudeGeometry",{args:[de(),{depth:2}]}),e("meshPhysicalMaterial",{color:"#0069c5",metalness:1,roughness:.8})]}),d("mesh",{position:new C(-n-5,5/2*r,0),rotation:[0,Math.PI/2,0],receiveShadow:!0,children:[e("extrudeGeometry",{args:[x(),{depth:2*n+10||t}]}),e("meshPhysicalMaterial",{color:"#4895f6",metalness:1,roughness:.8})]}),d("mesh",{position:new C(-n,5/2*r,0),rotation:[0,Math.PI/2,0],receiveShadow:!0,children:[e("extrudeGeometry",{args:[w(),{depth:2*n||t}]}),e("meshPhysicalMaterial",{map:S,metalness:1,roughness:.8})]})]})},{Vector3:_e}=Ee,fe=20,y=new _e(60,70,60),u=3,Be=2,Ae=5;function aa(o){const{layout:{row:t,col:n,layer:a},groupProps:r}=o,s=l.useMemo(()=>t*y.x+(t+1)*u,[t]),i=l.useMemo(()=>fe+a*(y.y+u),[a]),h=l.useMemo(()=>n*y.z+(n+1)*u,[n]),p=l.useMemo(()=>new L(u,u,h),[n]),c=l.useMemo(()=>new L(u,i,u),[a]),g=l.useMemo(()=>new ce({color:"blue"}),[]),f=l.useMemo(()=>new ce({color:"white"}),[]),b=l.useMemo(()=>new L(s-1,Be,Be),[t]),_=l.useMemo(()=>new L(s-1,Ae,Ae),[t]);return l.useEffect(()=>()=>{p.dispose(),c.dispose(),g.dispose(),f.dispose(),b.dispose(),_.dispose()}),d("group",{...r,children:[new Array(t+1).fill(1).map((M,S)=>new Array(a).fill(1).map((V,R)=>{const E=new _e(-s/2+S*(u+y.x)+u/2,fe+R*(y.y+u),0);return e("mesh",{geometry:p,material:g,position:E})})),new Array(t+1).fill(1).map((M,S)=>new Array(n+1).fill(1).map((V,R)=>{const E=new _e(-s/2+S*(u+y.x)+u/2,i/2,-h/2+R*(u+y.z)+u/2);return e("mesh",{geometry:c,material:g,position:E})})),new Array(n+1).fill(1).map((M,S)=>new Array(a).fill(1).map((V,R)=>{const E=-h/2+S*(u+y.z)+u/2,Y=new _e(0,fe+R*(y.y+u)+Ae+Be,E),J=new _e(0,fe+R*(y.y+u)+Ae,E);return d(O,{children:[e("mesh",{geometry:b,material:f,position:Y}),e("mesh",{geometry:_,material:f,position:J})]})}))]})}const{Vector3:q}=Ee,Se=new q(50,50,50),T=new q(56,1,56),I=new q(4,6,4);T.x,Se.y+T.y*2+I.y,T.z;function na(){const o=new q(0,I.y+T.y*2+Se.y/2,0),t=new q(0,I.y+T.y*1.5,0),n=new q(0,T.y/2,0),a=new q(-T.x/2+I.x/2,T.y+I.y/2,-T.z/2+I.z/2),r=new q(T.x/2-I.x/2,T.y+I.y/2,-T.z/2+I.z/2),s=new q(-T.x/2+I.x/2,T.y+I.y/2,T.z/2-I.z/2),i=new q(T.x/2-I.x/2,T.y+I.y/2,T.z/2-I.z/2);return{goodsPosition:o,palletPlaneTopPosition:t,palletPlaneBottomPosition:n,palletRackPositionTopLeft:a,palletRackPositionTopRight:r,palletRackPositionDownLeft:s,palletRackPositionDownRight:i}}function ae(o){const{groupProps:t}=o,n=le(Po,"/static/goods_texture.png"),a=l.useMemo(()=>new L(Se.x,Se.y,Se.z),[]),r=l.useMemo(()=>new ce({color:"#d0975d",map:n}),[n]),s=l.useMemo(()=>new ce({color:"grey"}),[]),i=l.useMemo(()=>new L(T.z,T.y,T.z),[]),h=l.useMemo(()=>new L(I.x,I.y,I.z),[]),{goodsPosition:p,palletPlaneTopPosition:c,palletPlaneBottomPosition:g,palletRackPositionTopLeft:f,palletRackPositionTopRight:b,palletRackPositionDownLeft:_,palletRackPositionDownRight:M}=l.useMemo(na,[]);return d("group",{...t,children:[e("mesh",{geometry:a,material:r,position:p}),e("mesh",{geometry:i,material:s,position:c}),e("mesh",{geometry:i,material:s,position:g}),e("mesh",{geometry:h,material:s,position:f}),e("mesh",{geometry:h,material:s,position:b}),e("mesh",{geometry:h,material:s,position:_}),e("mesh",{geometry:h,material:s,position:M})]})}function Bt(o){const{hasGoods:t,position:n}=o,a=l.useMemo(()=>{const s=le(xe,"/static/models/SXC-JXB.FBX").clone();return s.scale.set(.05,.06,.04),s},[]);return d("group",{position:n,children:[t&&e(ae,{groupProps:{position:[0,5,0]}}),e("primitive",{object:a})]})}const{Vector3:Ze}=Ee,v=new Ze(y.x+u*2,fe,y.z+u*2),we=new Ze(y.x-u,u,y.z-u);function sa(o){const{hasCar:t,hasGoods:n,layout:{layer:a},lifterPosition:r,groupProps:s}=o,i=(u+y.y)*a,h=new L(u,i,u),p=new L(y.x,u,u),c=new L(we.x,we.y,we.z),g=new L(v.x,v.y,v.z),f=new ce({color:"white"}),b=new ce({color:"orange"});return d("group",{...s,children:[e("mesh",{geometry:h,material:f,position:[-v.x/2+u/2,i/2+v.y,-v.z/2+u/2]}),e("mesh",{geometry:h,material:f,position:[v.x/2-u/2,i/2+v.y,-v.z/2+u/2]}),e("mesh",{geometry:h,material:f,position:[-v.x/2+u/2,i/2+v.y,v.z/2-u/2]}),e("mesh",{geometry:h,material:f,position:[v.x/2-u/2,i/2+v.y,v.z/2-u/2]}),e("mesh",{geometry:h,material:f,position:[-v.x/2+u/2,i/2+v.y,0]}),e("mesh",{geometry:h,material:f,position:[v.x/2-u/2,i/2+v.y,0]}),e("mesh",{geometry:g,material:f,position:[0,v.y/2,0]}),e("mesh",{geometry:g,material:f,position:[0,v.y+v.y/2+i,0]}),d("group",{position:r,children:[t&&e(Bt,{position:new Ze(0,v.y+we.y,0)}),n&&e(ae,{groupProps:{position:[0,v.y+we.y,0]}}),e("mesh",{geometry:c,material:b,position:[0,v.y+we.y/2,0]})]}),new Array(a-1).fill(1).map((_,M)=>{const S=v.y+(y.y+u)*(M+1);return d(O,{children:[e("mesh",{geometry:p,material:f,position:[0,S,-v.z/2+u/2]}),e("mesh",{geometry:p,material:f,position:[0,S,v.z/2-u/2]}),e("mesh",{geometry:p,material:f,rotation:[0,Math.PI/2,0],position:[v.x/2-u/2,S,0]}),e("mesh",{geometry:p,material:f,rotation:[0,Math.PI/2,0],position:[-v.x/2+u/2,S,0]})]})})]})}function ia(o){const{layout:{col:t,layer:n},groupProps:a}=o,r=y.x+u,s=(n+1)*(y.y+u),i=y.z*t+(t+1)*u,h=new L(y.z,u,u),p=new L(u,u,i),c=new L(u,s,u),g=Math.sqrt(y.x*y.x+y.y*y.y),f=new L(g,1,1),b=new ce({color:"blue"});return d("group",{...a,children:[e("mesh",{geometry:c,material:b,position:[-r/2,s/2,-i/2]}),e("mesh",{geometry:c,material:b,position:[r/2,s/2,i/2]}),e("mesh",{geometry:c,material:b,position:[-r/2,s/2,i/2]}),e("mesh",{geometry:c,material:b,position:[r/2,s/2,-i/2]}),new Array(n).fill(1).map((_,M)=>{const S=(y.y+u)*(M+1);return d(O,{children:[e("mesh",{geometry:p,material:b,position:[-r/2,S,0]}),e("mesh",{geometry:p,material:b,position:[r/2,S,0]}),e("mesh",{geometry:f,material:b,position:[0,S+y.y/2+u/2,i/2],rotation:[0,0,Math.atan(y.y/y.x)]}),e("mesh",{geometry:f,material:b,position:[0,S+y.y/2+u/2,i/2],rotation:[0,0,-Math.atan(y.y/y.x)]}),e("mesh",{geometry:f,material:b,position:[0,S+y.y/2+u/2,-i/2],rotation:[0,0,Math.atan(y.y/y.x)]}),e("mesh",{geometry:f,material:b,position:[0,S+y.y/2+u/2,-i/2],rotation:[0,0,-Math.atan(y.y/y.x)]})]})}),new Array(n).fill(1).map((_,M)=>new Array(t+1).fill(1).map((S,V)=>{const R=(y.y+u)*(M+1),E=-i/2+V*(u+y.z)+u/2;return d(O,{children:[e("mesh",{geometry:h,material:b,position:[0,R,E]}),e("mesh",{geometry:h,material:b,position:[0,R,E]})]})}))]})}const pe=4;function la(o){const{layout:{col:t,layer:n},groupProps:a}=o,r=l.useMemo(()=>t*y.z+(t+1)*u,[t]),s=l.useMemo(()=>new L(pe,pe,r),[t]),i=l.useMemo(()=>new L(y.x,pe,pe),[]),h=l.useMemo(()=>new ce({color:"orange"}),[]);return l.useEffect(()=>()=>{s.dispose(),i.dispose(),h.dispose()}),d("group",{...a,children:[new Array(n).fill(1).map((p,c)=>{const g=fe+(y.y+u)*c;return d(O,{children:[e("mesh",{geometry:s,material:h,position:[-y.x/2-pe/2,g,0]}),e("mesh",{geometry:s,material:h,position:[y.x/2+pe/2,g,0]})]})}),new Array(n).fill(1).map((p,c)=>new Array(t+1).fill(1).map((g,f)=>{const b=fe+(y.y+u)*c,_=-r/2+(y.z+u)*f+pe/2;return e("mesh",{geometry:i,material:h,position:[0,b,_]})}))]})}function ca(o){const{hasGoods:t,position:n,radian:a}=o,r=l.useMemo(()=>{const s=le(xe,"/static/models/maixiaowei-1.FBX");return s.scale.set(.05,.05,.05),s},[]);return d("group",{position:n,"rotation-y":a,children:[t&&e(ae,{groupProps:{position:[0,0,-10]}}),r&&e("primitive",{object:r})]})}function ot(o){const{hasGoods:t,position:n,liftArmHeight:a=0,forkArmHeight:r=0,radian:s=0}=o,i=l.useMemo(()=>{const c=le(xe,"/static/models/SE-1.FBX");return c.scale.set(.05,.05,.05),c.clone()},[]),h=l.useMemo(()=>{const c=le(xe,"/static/models/SE-2.FBX");return c.scale.set(.05,.05,.05),c.clone()},[]),p=l.useMemo(()=>{const c=le(xe,"/static/models/SE-3.FBX");return c.scale.set(.05,.05,.05),c.clone()},[]);return d("group",{position:n,"rotation-y":s,children:[d("group",{"position-y":a,children:[d("group",{children:[t&&e(ae,{groupProps:{position:[0,r+2,-77]}}),e("primitive",{object:i,position:[0,r,-30]})]}),e("primitive",{object:h,position:[0,0,-28]})]}),e("primitive",{object:p,position:[0,0,0]})]})}const da=({x:o,y:t,width:n,height:a,tunnelNumber:r})=>{const s=new C(o+n/2,1.1,t+a/2),i=new C(o+n/2,1,t+a/2),h=new C(o+n/2,1.2,t+a/2);return d("group",{children:[d("mesh",{position:s,rotation:[-Math.PI/2,0,0],children:[e("planeGeometry",{args:[n,a]}),e(Co,{blur:[400,100],resolution:1024,mixBlur:1,mixStrength:5,depthScale:1,minDepthThreshold:1,color:"rgb(0, 73, 45)",metalness:.85,roughness:.95,mirror:0})]}),d("mesh",{position:i,rotation:[-Math.PI/2,0,0],children:[e("planeGeometry",{args:[n>0?n+20:n-20,a>0?a+20:a-20]}),e("meshBasicMaterial",{color:"rgb(221, 165, 15)"})]}),e(pt,{scale:100,rotation:[-Math.PI/2,0,0],position:h,transform:!0,occlude:!0,children:r})]})};function ma(o,t,n=50){const a=document.createElement("canvas");a.width=300,a.height=300;const r=a.getContext("2d");return r.beginPath(),r.font=`${n}px Microsoft YaHei`,r.fillStyle=t,r.textAlign="center",r.textBaseline="middle",r.fillText(o,a.width/2,a.height/2),r.fill(),r.stroke(),a}function ua({text:o,position:t,scale:n=new C(100,100,100),color:a="#00D1D1",fontSize:r=50}){const[s,i]=l.useState(void 0);return l.useEffect(()=>{const h=new ko({map:new Mo(ma(o,a,r)),blending:Ao});i(h)},[o,a,r]),e("sprite",{material:s,position:t,scale:n})}const ha={},pa=e(Ro,{}),fa=o=>e("div",{className:"list",children:o.map(({icon:t,label:n,value:a})=>d("div",{className:"item item-decoration",children:[d("div",{className:"left",children:[e("div",{className:"icon",children:t||pa}),d("div",{className:"label",children:[n,"："]})]}),e("div",{className:"value",children:a})]},n))}),ya=l.forwardRef((o,t)=>{const{title:n,position:a,customAnnotationContent:r,htmlProps:s,data:i,annotationContentBeforeRender:h}=o,[p,c]=l.useState(!0);return l.useImperativeHandle(t,()=>({show:()=>c(!0),hide:()=>c(!1)})),p?e(pt,{position:a,distanceFactor:350,...ha,...s,transform:!0,sprite:!0,children:e(To,{className:`line ${p?"slide-in-elliptic-top-fwd":""}`,style:{padding:"3px"},children:d("div",{className:"card",children:[d("div",{className:"header",children:[e("div",{className:"title",children:n}),e(Go,{className:"close",onClick:()=>c(!1)})]}),e(Lo,{style:{width:"100%",height:"5px"}}),h,e("div",{className:"content",children:r??fa(i||[])})]})})}):null}),rt=1,ga=({x:o,y:t,width:n,height:a,areaNumber:r,textHeight:s,strokeColor:i})=>{const[h,p]=l.useState(!1),[c,g]=l.useState(!1),f=l.useRef(null),{controls:b}=Re(K=>({controls:K.controls})),_=new C(o+n/2,rt,t+a/2),M=[n,1,a];s||(s=rt+50);const S=()=>{var D;if(c)return;g(!0);const K=f.current,{x:de,y:x,z:w}=K.position,z=new Eo().setFromCenterAndSize(new C(de,(x+s)/2,w),new C(n,s,a));b.fitToBox(z,!0),(D=Y.current)==null||D.show()},V=()=>{g(!1)},R=()=>p(!0),E=()=>p(!1);ft(()=>{const K=f.current;if(K){const de=h||c?i:"white",x=c?.5:.2,w=K.material;w.color.set(de),w.linewidth=x}});const Y=l.useRef(null),J=[{label:"长",value:n+"米"},{label:"宽",value:a+"米"}];return d("group",{onClick:S,onPointerOver:R,onPointerOut:E,onDoubleClick:V,onPointerMissed:()=>g(!1),children:[d("mesh",{ref:f,position:_,children:[e("boxGeometry",{attach:"geometry",args:M}),d("lineSegments",{children:[e("edgesGeometry",{attach:"geometry",args:[new L(...M)]}),e("lineBasicMaterial",{attach:"material",color:i,linewidth:.2})]}),e("meshBasicMaterial",{attach:"material",color:i,transparent:!0,opacity:.2})]}),r&&e(ua,{position:new C(_.x,s,_.z),text:r,scale:new C(100,100,100),fontSize:100}),e(ya,{ref:Y,title:r,position:_,data:J})]})},wa=[{position:[600,0,-500],layout:{col:8,layer:5}},{position:[670,0,-500],layout:{col:8,layer:5}},{position:[900,0,-500],layout:{col:8,layer:5}},{position:[970,0,-500],layout:{col:8,layer:5}},{position:[1200,0,-500],layout:{col:8,layer:5}},{position:[1270,0,-500],layout:{col:8,layer:5}}],xa=[[-445.5,20,-348],[-382.5,20,-348],[-445.5,20,-285],[-382.5,20,-285],[-445.5,20,-222],[-382.5,20,-222],[-445.5,20,-159],[-445.5,20,-96],[-382.5,20,-96],[-445.5,20,-33],[-382.5,20,-33],[-445.5,20,30],[-382.5,20,30],[-445.5,20,93],[-382.5,20,93],[-445.5,20,156],[-445.5,20,219],[-445.5,20,282],[-382.5,20,282],[-445.5,20,345],[-445.5,93,-348],[-382.5,93,-348],[-445.5,93,-285],[-382.5,93,-285],[-445.5,93,-222],[-382.5,93,-222],[-445.5,93,-159],[-445.5,93,-96],[-445.5,93,-33],[-445.5,93,30],[-445.5,93,93],[-445.5,93,156],[-382.5,93,156],[-445.5,93,219],[-382.5,93,219],[-445.5,93,282],[-382.5,93,282],[-445.5,93,345],[-382.5,93,345],[-445.5,166,-348],[-382.5,166,-348],[-445.5,166,-285],[-382.5,166,-285],[-445.5,166,-222],[-382.5,166,-222],[-445.5,166,-159],[-382.5,166,-159],[-445.5,166,-96],[-382.5,166,-96],[-445.5,166,-33],[-382.5,166,-33],[-445.5,166,30],[-382.5,166,30],[-445.5,166,93],[-382.5,166,93],[-445.5,166,156],[-382.5,166,156],[-445.5,166,219],[-382.5,166,219],[-445.5,166,282],[-382.5,166,282],[-445.5,166,345],[-382.5,166,345],[-445.5,239,-348],[-382.5,239,-348],[-445.5,239,-285],[-382.5,239,-285],[-445.5,239,-222],[-382.5,239,-222],[-445.5,239,-159],[-382.5,239,-159],[-445.5,239,-96],[-382.5,239,-96],[-445.5,239,-33],[-382.5,239,-33],[-445.5,239,30],[-382.5,239,30],[-445.5,239,93],[-382.5,239,93],[-445.5,239,156],[-382.5,239,156],[-445.5,239,219],[-382.5,239,219],[-445.5,239,282],[-382.5,239,282],[-445.5,239,345],[-382.5,239,345],[-445.5,312,-348],[-382.5,312,-348],[-445.5,312,-285],[-382.5,312,-285],[-445.5,312,-222],[-382.5,312,-222],[-445.5,312,-159],[-382.5,312,-159],[-445.5,312,-96],[-382.5,312,-96],[-445.5,312,-33],[-382.5,312,-33],[-445.5,312,30],[-382.5,312,30],[-445.5,312,93],[-445.5,312,156],[-445.5,312,219],[-382.5,312,219],[-445.5,312,282],[-382.5,312,282],[-445.5,312,345],[66.5,20,-348],[129.5,20,-348],[66.5,20,-285],[129.5,20,-285],[129.5,20,-222],[129.5,20,-159],[66.5,20,-96],[129.5,20,-96],[129.5,20,-33],[66.5,20,30],[129.5,20,30],[66.5,20,93],[129.5,20,93],[66.5,20,156],[129.5,20,156],[66.5,20,219],[129.5,20,219],[66.5,20,282],[129.5,20,282],[66.5,20,345],[129.5,20,345],[66.5,93,-348],[129.5,93,-348],[129.5,93,-285],[129.5,93,-222],[129.5,93,-159],[66.5,93,-96],[129.5,93,-96],[66.5,93,-33],[129.5,93,-33],[66.5,93,30],[129.5,93,30],[66.5,93,93],[129.5,93,93],[66.5,93,156],[129.5,93,156],[66.5,93,219],[129.5,93,219],[129.5,93,282],[66.5,93,345],[129.5,93,345],[66.5,166,-348],[129.5,166,-348],[129.5,166,-285],[129.5,166,-222],[129.5,166,-159],[66.5,166,-96],[129.5,166,-96],[66.5,166,-33],[129.5,166,-33],[66.5,166,30],[129.5,166,30],[66.5,166,93],[129.5,166,93],[66.5,166,156],[129.5,166,156],[129.5,166,219],[129.5,166,282],[66.5,166,345],[129.5,166,345],[66.5,239,-348],[129.5,239,-348],[66.5,239,-285],[129.5,239,-285],[66.5,239,-222],[129.5,239,-222],[66.5,239,-159],[129.5,239,-159],[66.5,239,-96],[129.5,239,-96],[129.5,239,-33],[129.5,239,30],[66.5,239,93],[129.5,239,93],[66.5,239,156],[129.5,239,156],[66.5,239,219],[129.5,239,219],[129.5,239,282],[66.5,239,345],[129.5,239,345],[66.5,312,-348],[129.5,312,-348],[129.5,312,-285],[66.5,312,-222],[129.5,312,-222],[66.5,312,-159],[129.5,312,-159],[66.5,312,-96],[129.5,312,-96],[66.5,312,-33],[129.5,312,-33],[129.5,312,93],[129.5,312,156],[66.5,312,219],[129.5,312,219],[66.5,312,282],[129.5,312,282],[66.5,312,345],[129.5,312,345],[900,365,-596],[900,365,-533],[900,365,-470],[900,365,-407],[900,365,-344],[900,365,-281],[970,0,-281],[970,73,-722],[970,73,-659],[970,73,-596],[970,73,-533],[970,146,-596],[970,146,-533],[970,146,-470],[970,146,-407],[970,146,-344],[970,146,-281],[970,219,-281],[970,292,-722],[970,292,-659],[970,292,-596],[970,292,-533],[970,365,-533],[970,365,-407],[970,365,-281],[1200,219,-722],[1200,219,-596],[1200,219,-470],[1200,365,-407],[1200,365,-344],[1200,365,-281],[1270,219,-596],[1270,219,-533],[1270,219,-470],[1270,365,-722],[1270,365,-659],[1270,365,-596],[1270,365,-470],[1270,365,-281],[1270,0,-215],[600,0,340],[600,0,400],[660,0,280],[660,0,340],[660,0,400],[720,0,220],[720,0,280],[720,0,340],[720,0,400],[780,0,160],[780,0,220],[780,0,280],[780,0,340],[780,0,400],[840,0,100],[840,0,160],[840,0,220],[840,0,280],[840,0,340],[840,0,400],[900,0,100],[900,0,160],[900,0,220],[900,0,280],[900,0,340],[900,0,400],[960,0,100],[960,0,160],[960,0,220],[960,0,280],[960,0,340],[960,0,400],[1020,0,100],[1020,0,160],[1020,0,220],[1020,0,280],[1020,0,340],[1020,0,400],[1080,0,100],[1080,0,160],[1080,0,220],[1080,0,280],[1080,0,340],[1080,0,400],[1140,0,100],[1140,0,160],[1140,0,220],[1140,0,280],[1140,0,340],[1140,0,400],[1200,0,100],[1200,0,160],[1200,0,220],[1200,0,280],[1200,0,340],[1200,0,400],[1260,0,100],[1260,0,160],[1260,0,220],[1260,0,280],[1260,0,340],[1260,0,400]],He={shelf:[{layout:{col:12,row:5,layer:5},position:[-318,0,0]},{layout:{col:12,row:4,layer:5},position:[36.5,0,0]}],track:[{layout:{col:12,layer:5},position:[-125,0,0]}],lifter:[{layout:{layer:5},position:[-124,0,415]}]},Fe=[[{el:"forkTruckCar",type:"move",from:[460,0,700],to:[460,0,-722],radian:Math.PI,hasGoods:!1,time:4e3}],[{el:"forkTruckCar",type:"rotate",radian:Math.PI,varyRadian:Math.PI/2,hasGoods:!1,time:2e3}],[{el:"forkTruckCar",type:"liftArm",formLiftH:0,toLiftH:90,radian:Math.PI,hasGoods:!1,time:2e3}],[{el:"forkTruckCar",type:"liftArm",formLiftH:90,toLiftH:90,radian:Math.PI,hasGoods:!1,time:500}],[{el:"forkTruckCar",type:"forkArm",formForkH:0,toForkH:54,radian:Math.PI,hasGoods:!1,time:2e3}],[{el:"forkTruckCar",type:"forkArm",formForkH:54,toForkH:54,radian:Math.PI,hasGoods:!1,time:500}],[{el:"forkTruckCar",type:"move",from:[460,0,-722],to:[500,0,-722],radian:Math.PI,hasGoods:!1,time:1e3}],[{el:"forkTruckCar",type:"move",from:[500,0,-722],to:[500,0,-722],radian:Math.PI,hasGoods:!0,time:500}],[{el:"forkTruckCar",type:"move",from:[500,0,-722],to:[460,0,-722],radian:Math.PI,hasGoods:!0,time:1e3}],[{el:"forkTruckCar",type:"liftArm",formLiftH:90,toLiftH:0,radian:Math.PI,hasGoods:!0,time:2e3}],[{el:"forkTruckCar",type:"forkArm",formForkH:54,toForkH:0,radian:Math.PI,hasGoods:!0,time:2e3}],[{el:"forkTruckCar",type:"rotate",radian:Math.PI,varyRadian:Math.PI/2,hasGoods:!0,time:2e3}],[{el:"forkTruckCar",type:"move",from:[460,0,-722],to:[460,0,600],radian:Math.PI,hasGoods:!0,time:4e3}],[{el:"mxwCar",type:"move",from:[460,0,700],to:[460,0,280],radian:Math.PI,hasGoods:!1,time:2e3}],[{el:"mxwCar",type:"rotate",radian:Math.PI,varyRadian:Math.PI/2,hasGoods:!1,time:2e3}],[{el:"mxwCar",type:"move",from:[400,0,280],to:[590,0,280],hasGoods:!1,time:2e3}],[{el:"mxwCar",type:"move",from:[590,0,280],to:[590,0,280],hasGoods:!0,time:500}],[{el:"mxwCar",type:"rotate",radian:Math.PI,varyRadian:-Math.PI/2,hasGoods:!0,time:2e3}],[{el:"mxwCar",type:"move",from:[590,0,280],to:[590,0,-215],hasGoods:!0,time:2e3}],[{el:"mxwCar",type:"rotate",radian:Math.PI,varyRadian:Math.PI/2,hasGoods:!0,time:2e3}],[{el:"mxwCar",type:"move",from:[590,0,-215],to:[590,0,-215],hasGoods:!0,time:500}],[{el:"mxwCar",type:"move",from:[590,0,-215],to:[400,0,-215],hasGoods:!0,time:1e3}],[{el:"mxwCar",type:"rotate",radian:Math.PI,varyRadian:Math.PI/2,hasGoods:!0,time:2e3}],[{el:"mxwCar",type:"move",from:[400,0,-215],to:[400,0,700],hasGoods:!0,time:3e3}],[{el:"mxwCar",type:"move",from:[400,0,700],to:[400,0,700],hasGoods:!0,time:500}],[{el:"forWayCar",type:"move",from:[-125,23,32],to:[-125,23,415],hasGoods:!0,time:2e3}],[{el:"forWayCar",type:"move",from:[-125,23,415],to:[-125,23,415],hasGoods:!0,time:500}],[{el:"forWayCar",type:"move",from:[-125,23,415],to:[-125,314,415],hasGoods:!0,time:4e3}],[{el:"forWayCar",type:"move",from:[-125,314,415],to:[-125,314,415],hasGoods:!0,time:500}],[{el:"forWayCar",type:"move",from:[-125,314,415],to:[-125,314,32],hasGoods:!0,time:2e3}],[{el:"forWayCar",type:"move",from:[-125,314,32],to:[130,314,32],hasGoods:!0,time:4e3}],[{el:"forWayCar",type:"move",from:[130,314,32],to:[130,314,32],hasGoods:!0,time:500}],[{el:"forWayCar",type:"move",from:[130,314,32],to:[-125,314,32],hasGoods:!1,time:4e3}],[{el:"conveyerBelt",type:"move",from:[76,25,0],to:[-124,25,0],hasGoods:!0,time:3e3},{el:"forkTruckCar2",type:"move",from:[-780,0,-300],to:[-780,0,495],radian:0,hasGoods:!1,time:3e3}],[{el:"conveyerBelt",type:"move",from:[-124,25,0],to:[-224,25,0],hasGoods:!0,time:1500},{el:"forkTruckCar2",type:"rotate",radian:0,varyRadian:-Math.PI/2,hasGoods:!1,time:1500}],[{el:"conveyerBelt",type:"move",from:[-224,25,0],to:[-324,25,0],hasGoods:!0,time:1500},{el:"forkTruckCar2",type:"liftArm",formLiftH:0,toLiftH:23,radian:Math.PI,hasGoods:!1,time:1500}],[{el:"conveyerBelt",type:"move",from:[-324,25,0],to:[-440,25,0],hasGoods:!0,time:1500},{el:"forkTruckCar2",type:"move",radian:-Math.PI/2,from:[-780,0,495],to:[-750,0,495],hasGoods:!1,time:1500}],[{el:"conveyerBelt",type:"move",from:[-440,25,0],to:[-440,25,0],hasGoods:!1,time:500},{el:"forkTruckCar2",type:"move",radian:-Math.PI/2,from:[-750,0,495],to:[-750,0,495],hasGoods:!0,time:500}],[{el:"forkTruckCar2",type:"move",radian:-Math.PI/2,from:[-750,0,495],to:[-780,0,495],hasGoods:!0,time:1500}],[{el:"forkTruckCar2",type:"liftArm",formLiftH:23,toLiftH:0,radian:Math.PI,hasGoods:!0,time:1500}],[{el:"forkTruckCar2",type:"rotate",radian:-Math.PI/2,varyRadian:-Math.PI/2,hasGoods:!0,time:1500}],[{el:"forkTruckCar2",type:"move",from:[-780,0,495],to:[-780,0,-300],radian:0,hasGoods:!0,time:3e3}]],ba=[{x:200,y:-1e3,width:200,height:2e3,name:"selected-rect1684723196047",type:"tunnel",strokeColor:"yellow",tunnelNumber:"T1"},{x:200,y:-50,width:1300,height:100,name:"selected-rect1684723196047",type:"tunnel",strokeColor:"yellow",tunnelNumber:"T2"}],va=[{x:-500,y:-400,width:700,height:800,name:"selected-rect1684723196047",type:"area",strokeColor:"rgb(255, 0, 14)",areaNumber:"A1",textHeight:400}],at=315;function _a(o){const{hasGoods:t,position:n,goodsPosition:a}=o,r=l.useMemo(()=>{const i=le(xe,"/static/models/GTX.FBX").clone();return i.scale.set(.08,.05,.08),i},[]);return d("group",{position:n,children:[t&&e(ae,{groupProps:{position:a}}),e("primitive",{object:r,position:[-at,0,0]}),e("primitive",{object:r.clone(),position:[0,0,0]}),e("primitive",{object:r.clone(),position:[at,0,0]})]})}const{Vector3:Ne}=Ee;let ve=0,Ve=0;const Sa=Ce(()=>{Re();const[o,t]=l.useState({position:[-125,23,32],hasGoods:!0}),[n,a]=l.useState({position:[400,0,700],hasGoods:!1,radian:0}),[r,s]=l.useState({position:[460,0,700],hasGoods:!1,radian:0,liftArmHeight:0,forkArmHeight:0}),[i,h]=l.useState({position:[-780,0,-300],hasGoods:!1,radian:0,liftArmHeight:0,forkArmHeight:0}),[p,c]=l.useState({goodsPosition:[76,25,0],hasGoods:!1});l.useRef(null);function g(x,w){const{from:z,to:D,time:B}=w,[F,N,Q]=z,[me,X,ge]=D,ue=(me-F)/B*x,k=(X-N)/B*x,A=(ge-Q)/B*x;return[ue,k,A]}function f(x,w){const{varyRadian:z,time:D}=w;return z/D*x}function b(x,w,z){let D=0;if(x==="liftArm"){const{formLiftH:B,toLiftH:F,time:N}=w;D=(F-B)/N*z}else if(x==="forkArm"){const{formForkH:B,toForkH:F,time:N}=w;D=(F-B)/N*z}return D}ft((x,w)=>{if(ve>Fe.length)return;w*=1e3;const z=Fe[ve],D=z[0].time;for(let B=0;B<z.length;B++){const F=z[B],{el:N,hasGoods:Q,radian:me,type:X,liftArmHeight:ge=0,forkArmHeight:ue=0}=F;let k=[0,0,0],A=0,$=0,U=0;X==="move"&&(k=g(w,F)),X==="rotate"&&(A=f(w,F)),X==="liftArm"&&($=b("liftArm",F,w)),X==="forkArm"&&(U=b("forkArm",F,w));const[H,ee,ne]=k;N==="mxwCar"?a(G=>{const[te,oe,re]=G.position;return{position:[te+H,oe+ee,re+ne],hasGoods:Q,radian:(G.radian||me)+A}}):N==="forWayCar"?t(G=>{const[te,oe,re]=G.position;return{position:[te+H,oe+ee,re+ne],hasGoods:Q}}):N==="forkTruckCar"?s(G=>{const[te,oe,re]=G.position;return{position:[te+H,oe+ee,re+ne],hasGoods:Q,radian:(G.radian||me)+A,liftArmHeight:(G.liftArmHeight||ge)+$,forkArmHeight:(G.forkArmHeight||ue)+U}}):N==="conveyerBelt"?c(G=>{const[te,oe,re]=G.goodsPosition;return{goodsPosition:[te+H,oe+ee,re+ne],hasGoods:Q}}):N==="forkTruckCar2"&&h(G=>{const[te,oe,re]=G.position;return{position:[te+H,oe+ee,re+ne],hasGoods:Q,radian:(G.radian||me)+A,liftArmHeight:(G.liftArmHeight||ge)+$,forkArmHeight:(G.forkArmHeight||ue)+U}})}Ve+=w,Ve>=D&&(Ve=0,ve++,ve>=Fe.length&&(t({position:[-125,23,32],hasGoods:!0}),a({position:[400,0,700],hasGoods:!1,radian:0}),s({position:[460,0,700],hasGoods:!1,radian:0,liftArmHeight:0,forkArmHeight:0}),c({goodsPosition:[76,25,0],hasGoods:!1}),h({position:[-780,0,-300],hasGoods:!1,radian:0,liftArmHeight:0,forkArmHeight:0}),ve=0))});const _=l.useMemo(()=>xa.map((x,w)=>e(ae,{groupProps:{position:x}},w)),[]),M=l.useMemo(()=>d(O,{children:[He.shelf.map((x,w)=>e(aa,{layout:x.layout,groupProps:{position:new Ne(...x.position)}},w)),He.track.map((x,w)=>e(la,{layout:x.layout,groupProps:{position:new Ne(...x.position)}},w)),He.lifter.map((x,w)=>e(sa,{layout:x.layout,groupProps:{position:new Ne(...x.position)}},w))]}),[]),S=l.useMemo(()=>wa.map((x,w)=>e(ia,{layout:x.layout,groupProps:{position:x.position}},w)),[]),V=l.useMemo(()=>e(ca,{...n}),[n]),R=l.useMemo(()=>e(ot,{...r}),[r]),E=l.useMemo(()=>e(ot,{...i}),[i]),Y=l.useMemo(()=>e(Bt,{...o}),[o]),J=l.useMemo(()=>ba.map((x,w)=>e(da,{...x},w)),[]),K=l.useMemo(()=>va.map((x,w)=>e(ga,{...x},w)),[]),de=l.useMemo(()=>e(_a,{position:[-300,0,495],...p}),[p]);return d("group",{children:[_,M,S,V,R,Y,!o.hasGoods&&e(ae,{groupProps:{position:[129.5,312,30]}}),!n.hasGoods&&e(ae,{groupProps:{position:[600,0,280]}}),!r.hasGoods&&e(ae,{groupProps:{position:[600,146,-722]}}),J,K,de,E]})}),Pa=()=>d(O,{children:[e(ra,{}),e(Sa,{})]}),Ca=()=>e(l.Suspense,{children:d(Io,{alignment:"bottom-right",margin:[80,80],onUpdate:()=>null,children:[e(Oo,{labelColor:"white",axisHeadScale:1}),e(zo,{className:"!right-0 top-0 !left-[inherit]"})]})}),ka=o=>e(O,{children:d(Do,{shadows:!0,gl:{logarithmicDepthBuffer:!0},children:[e(oa,{}),e(Pa,{}),o.children,e(Ca,{})]})}),Ma=()=>e(Nr,{children:d(l.Suspense,{fallback:e(yt,{size:"small"}),children:[e(ka,{}),e(Rt,{}),e(Dt,{})]})}),Ht=Ce(Ma),Aa=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"})),Ta="_errorPage_aoxrg_1",Ga={errorPage:Ta};function Ge(o){return e("div",{children:o!=null&&o.children?o.children:d("div",{className:Ga.errorPage,children:[e("h1",{children:"Oops!"}),e("p",{children:"Sorry, an unexpected error has occurred."}),e("p",{children:o==null?void 0:o.children})]})})}const La=Object.freeze(Object.defineProperty({__proto__:null,default:Ge},Symbol.toStringTag,{value:"Module"})),Ra="_loginContainer_1xc0e_1",Ea="_loginTop_1xc0e_14",nt={loginContainer:Ra,loginTop:Ea},Ft=()=>{const{signIn:o}=l.useContext(Je),t=lt(),n=Ke(),[a,r]=l.useState(!1),s=async h=>{try{r(!0);const p=JSON.stringify(h);await o(n,p),t("/")}finally{r(!1)}},[i]=Z.useForm();return d("div",{id:nt.loginContainer,children:[d("div",{className:nt.loginTop,children:[e("h2",{children:ie.title}),e(Bo,{src:ie.logo})]}),d(Z,{name:"normal_login",className:"login-form",initialValues:{remember:!0},size:"large",form:i,onFinish:s,children:[e(Z.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:e(Qe,{allowClear:!0,prefix:e(Ho,{}),placeholder:"admin or user"})}),e(Z.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:e(Qe.Password,{prefix:e(Fo,{}),type:"password",placeholder:"any password"})}),d(Z.Item,{children:[e(Z.Item,{noStyle:!0,name:"remember",valuePropName:"checked",children:e(No,{children:"Remember me"})}),e("a",{className:"login-form-forgot",href:"#",children:"Forgot password"})]}),d(Z.Item,{children:[e(gt,{block:!0,type:"primary",htmlType:"submit",className:"login-form-button",loading:a,children:"Log in"}),"Or"," ",e("a",{onClick:()=>{i.resetFields()},children:"register now!"})]})]})]})},Ia=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Oa=({children:o})=>Xe(Pe)?o:e(wt,{to:"/login"}),za=[{path:"/",element:e(Oa,{children:e(yr,{})}),errorElement:e(Ge,{}),children:[{path:"/",element:e(wt,{to:"dashboard"})},{path:"dashboard",element:e(Ht,{})},{path:"/*",element:e(Ge,{children:e(Vo,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:e(ct,{to:"/",children:e(gt,{type:"primary",children:"Back Home"})})})})}]},{path:"/login",element:e(Ft,{})}],Da=Object.assign({"../pages/alarm/components/alarmScrollBoard.tsx":()=>P(()=>import("./alarmScrollBoard-a9d1fe26.js"),["js/alarmScrollBoard-a9d1fe26.js","js/.pnpm-dac787a2.js","js/alarm-f3c92d63.js"]),"../pages/alarm/components/dayAlarm.tsx":()=>P(()=>import("./dayAlarm-e08c0c2e.js"),["js/dayAlarm-e08c0c2e.js","js/.pnpm-dac787a2.js","js/alarm-f3c92d63.js"]),"../pages/alarm/components/monthAlarm.tsx":()=>P(()=>import("./monthAlarm-9eb50192.js"),["js/monthAlarm-9eb50192.js","js/.pnpm-dac787a2.js","js/alarm-f3c92d63.js"]),"../pages/alarm/components/weekAlarm.tsx":()=>P(()=>import("./weekAlarm-69ad8485.js"),["js/weekAlarm-69ad8485.js","js/.pnpm-dac787a2.js","js/alarm-f3c92d63.js"]),"../pages/alarm/index.tsx":()=>P(()=>import("./index-fa41f78a.js"),["js/index-fa41f78a.js","js/.pnpm-dac787a2.js","js/dayAlarm-e08c0c2e.js","js/alarm-f3c92d63.js","js/weekAlarm-69ad8485.js","js/monthAlarm-9eb50192.js","js/alarmScrollBoard-a9d1fe26.js","css/index-c4387130.css"]),"../pages/dashboard/components/Panel.tsx":()=>P(()=>import("./Panel-b24fc6c7.js"),["js/Panel-b24fc6c7.js","js/.pnpm-dac787a2.js"]),"../pages/dashboard/components/bottom/index.tsx":()=>P(()=>import("./index-9d3caca6.js"),["js/index-9d3caca6.js","js/.pnpm-dac787a2.js"]),"../pages/dashboard/components/left/index.tsx":()=>P(()=>Promise.resolve().then(()=>Ir),void 0),"../pages/dashboard/components/left/modules/AgvPanel.tsx":()=>P(()=>Promise.resolve().then(()=>Er),void 0),"../pages/dashboard/components/left/modules/Buffer.tsx":()=>P(()=>Promise.resolve().then(()=>Lr),void 0),"../pages/dashboard/components/left/modules/Capacity.tsx":()=>P(()=>import("./Capacity-5ce4397f.js"),["js/Capacity-5ce4397f.js","js/.pnpm-dac787a2.js"]),"../pages/dashboard/components/left/modules/Task.tsx":()=>P(()=>Promise.resolve().then(()=>Rr),void 0),"../pages/dashboard/components/right/index.tsx":()=>P(()=>Promise.resolve().then(()=>Wr),void 0),"../pages/dashboard/components/right/modules/Allerway.tsx":()=>P(()=>Promise.resolve().then(()=>Or),void 0),"../pages/dashboard/components/right/modules/Handles.tsx":()=>P(()=>Promise.resolve().then(()=>$r),void 0),"../pages/dashboard/components/right/modules/Statistics.tsx":()=>P(()=>Promise.resolve().then(()=>zr),void 0),"../pages/dashboard/components/right/modules/Tasks.tsx":()=>P(()=>Promise.resolve().then(()=>Dr),void 0),"../pages/dashboard/index.tsx":()=>P(()=>Promise.resolve().then(()=>Aa),void 0),"../pages/error-page/index.tsx":()=>P(()=>Promise.resolve().then(()=>La),void 0),"../pages/list-page/index.tsx":()=>P(()=>import("./index-7db8ac89.js"),["js/index-7db8ac89.js","js/.pnpm-dac787a2.js"]),"../pages/login/index.tsx":()=>P(()=>Promise.resolve().then(()=>Ia),void 0),"../pages/systemManagement/roleManagement/index.tsx":()=>P(()=>import("./index-04725f29.js"),["js/index-04725f29.js","js/.pnpm-dac787a2.js"]),"../pages/systemManagement/userManagement/index.tsx":()=>P(()=>import("./index-46f77a16.js"),["js/index-46f77a16.js","js/.pnpm-dac787a2.js"]),"../pages/user/index.tsx":()=>P(()=>import("./index-11fa0946.js"),["js/index-11fa0946.js","js/.pnpm-dac787a2.js"])});function st(o){const t=Da[`../${o}`];if(!t)return e(Ge,{children:e(jo,{message:o+":Cannot find the path, please configure the correct folder path",type:"error"})});const n=l.lazy(t);return e(l.Suspense,{fallback:e(yt,{size:"small"}),children:e(n,{})})}const Ba=o=>o.map(t=>{var n;return t.children?{path:t.path,key:t.key,children:(n=t.children)==null?void 0:n.map(a=>({key:a.key,path:a.path,element:st(a.filepath)})),element:e(gr,{})}:{key:t.key,path:t.path,element:st(t.filepath)}});function Ha(){const o=Ke(),{user:{token:t,menu:n}}=Mt(s=>s),a=$o.cloneDeep(za);a[0].children=[...Ba(n),...a[0].children],kt(s=>{document.title=`${ie.title}: ${s.pathname.replace("/","")}`});const r=Wo(a);return l.useEffect(()=>{(t==null?void 0:t.username)===Ko?o(et([...tt.admin])):o(et([...tt.user]))},[t]),e(Je.Provider,{value:{signIn:Pt,signOut:Ct},children:r})}const Fa=document.getElementById("root"),Na=Yo(Fa);Na.render(e(Xo,{store:dr,children:e(Uo,{basename:"/"+"/degital-twin-3d/".replaceAll("/",""),children:e(Jo,{theme:{...ar()},children:e(Ha,{})})})}));export{ka as C,$a as G,be as P,ja as T,Tr as c,At as s};
